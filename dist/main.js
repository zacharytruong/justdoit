(()=>{"use strict";const e=function(){function e(){const e=JSON.parse(localStorage.getItem("allProjects")),t=document.createElement("ul");return t.classList.add("todos"),e.forEach((e=>{e.todos.forEach((e=>{const n=document.createElement("li");n.textContent=e.content,t.appendChild(n)}))})),t}function t(e){const t=JSON.parse(localStorage.getItem("allProjects")),n=document.createElement("ul");return n.classList.add("todos"),t.find((t=>t.name===e.target.id)).todos.forEach((e=>{document.createElement("i").classList.add("fa-thin");const t=document.createElement("li");t.textContent=e.content,n.appendChild(t)})),n}return{displayTodos:function(n){!function(e){const t=Array.from(document.getElementsByClassName("project")),n=document.getElementById(`${e.target.id}`);t.forEach((e=>{e.classList.remove("active")})),n.classList.add("active")}(n),dataPanel.innerHTML="","Inbox"===n.target.id?dataPanel.appendChild(e()):dataPanel.appendChild(t(n))},createInboxTodos:e,createProjectTodos:t}}(),t=function(){function e(){const e=document.createElement("div");e.classList.add("modalContainer"),e.classList.add("fadeIn");const a=document.createElement("div");return a.classList.add("modal"),a.appendChild(t()),a.appendChild(n()),e.appendChild(a),e}function t(){const e=document.createElement("p");return e.classList.add("alert"),e.textContent="Are you sure? Deleting project will delete all todos belong to it!",e}function n(){const e=document.createElement("div");return e.classList.add("actions"),e.appendChild(a()),e.appendChild(c()),e}function a(){const e=document.createElement("button");return e.textContent="No",e.classList.add("cancel"),e.addEventListener("click",o),e}function c(){const e=document.createElement("button");return e.textContent="Yes",e.classList.add("agree"),e.addEventListener("click",d),e}function o(e){const t=this.closest(".modalContainer");t.classList.remove("fadeIn"),t.classList.add("fadeOut"),t.addEventListener("animationend",(()=>{t.remove()}))}function d(e){const t=l("allProjects"),n=this.closest(".listContainer"),a=this.closest(".projects"),c=this.closest(".projectsContainer"),d=t.findIndex((e=>e.name===n.firstChild.id));t.splice(d,1),r(t),i("Inbox"),u(dataPanel),c.remove(),a.insertBefore(m(),a.lastChild),dataPanel.appendChild(p()),o.bind(this)()}function s(t){this.parentElement.appendChild(e())}function r(e){return localStorage.setItem("allProjects",JSON.stringify(e))}function l(e){return JSON.parse(localStorage.getItem(e))}function i(e){const t=Array.from(document.getElementsByClassName("project")),n=document.getElementById(e);t.forEach((e=>{e.classList.remove("active")})),n.classList.add("active")}function u(e){return e.innerHTML=""}function m(){const e=JSON.parse(localStorage.getItem("allProjects")),t=document.createElement("ul");return t.classList.add("projectsContainer"),e.forEach((e=>{const n=document.createElement("li");n.classList.add("listContainer");const a=document.createElement("span");a.textContent=e.name,a.classList.add("project"),a.id=e.name,a.addEventListener("click",f);const c=document.createElement("i");c.classList.add("fa-solid"),c.classList.add("fa-circle-minus"),c.addEventListener("click",s),t.appendChild(n),n.appendChild(a),n.appendChild(c)})),t}function p(){const e=JSON.parse(localStorage.getItem("allProjects")),t=document.createElement("ul");return t.classList.add("todos"),e.forEach((e=>{e.todos.forEach((e=>{const n=document.createElement("li");n.textContent=e.content,t.appendChild(n)}))})),t}function h(e){const t=JSON.parse(localStorage.getItem("allProjects")),n=document.createElement("ul");return n.classList.add("todos"),t.find((t=>t.name===e.target.id)).todos.forEach((e=>{document.createElement("i").classList.add("fa-thin");const t=document.createElement("li");t.textContent=e.content,n.appendChild(t)})),n}function f(e){!function(e){const t=Array.from(document.getElementsByClassName("project")),n=document.getElementById(`${e.target.id}`);t.forEach((e=>{e.classList.remove("active")})),n.classList.add("active")}(e),u(dataPanel),"Inbox"===e.target.id?dataPanel.appendChild(p()):dataPanel.appendChild(h(e))}return{deleteProject:s,retrieveLocalStorage:l,updateLocalStorage:r,clear:u,setActive:i,createActions:n,createAgreeBtn:c,createCancelBtn:a,createInboxTodos:p,createNotificationText:t,createPopup:e,createProjectTodos:h,createProjectsList:m}}(),n=function(){const e=[];class t{constructor(e){this.name=e,this.todos=[]}}class n{constructor(e){this.content=e}}return{Project:t,todo:n,createDemoData:function(){const a=new t("Cleaning"),c=new t("Laundry"),o=new t("Shopping");e.push(a),e.push(c),e.push(o);const d=new n("Sweeping the floor."),s=new n("Vacuuming the floor."),r=new n("Washing the filter."),l=new n("Buy new necklace."),i=new n("Put clothes in washer machine."),u=new n("Put clothes in dryer.");a.todos.push(d),a.todos.push(s),a.todos.push(r),c.todos.push(i),c.todos.push(u),o.todos.push(l),function(e){var t;try{t=window.localStorage;var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}()&&localStorage.setItem("allProjects",JSON.stringify(e))}}}(),a=function(){function e(e){let c=document.getElementById("newProjectName");const o=new n.Project(c.value),d=t.retrieveLocalStorage("allProjects"),s=this.closest(".projects"),r=this.closest(".projects"),l=r.children[1];r.removeChild(l),d.push(o),t.updateLocalStorage(d),t.clear(dataPanel),l.remove(),t.setActive("Inbox"),s.insertBefore(function(){const e=JSON.parse(localStorage.getItem("allProjects")),n=document.createElement("ul");return n.classList.add("projectsContainer"),e.forEach((e=>{const c=document.createElement("li");c.classList.add("listContainer");const o=document.createElement("span");o.textContent=e.name,o.classList.add("project"),o.id=e.name,o.addEventListener("click",a);const d=document.createElement("i");d.classList.add("fa-solid"),d.classList.add("fa-circle-minus"),d.addEventListener("click",t.deleteProject),n.appendChild(c),c.appendChild(o),c.appendChild(d)})),n}(),s.lastChild),dataPanel.appendChild(t.createInboxTodos()),this.closest(".modalContainer").remove()}function a(e){t.setActiveProject(e),t.clear(dataPanel),"Inbox"===e.target.id?dataPanel.appendChild(t.createInboxTodos()):dataPanel.appendChild(t.createProjectTodos(e))}return{addProject:function(t){this.parentElement.appendChild(function(){const t=document.createElement("div");return t.classList.add("modalContainer"),t.classList.add("fadeIn"),t.appendChild(function(){const t=document.createElement("div");t.classList.add("modal"),t.classList.add("flex");const n=document.createElement("label");n.setAttribute("for","newProjectName"),n.classList.add("label"),n.textContent="Enter the name for the project:";const a=document.createElement("input");a.id="newProjectName",a.type="text";const c=document.createElement("button");return c.classList.add("submit"),c.textContent="Submit",c.addEventListener("click",e),t.appendChild(n),t.appendChild(a),t.appendChild(c),t}()),t}())}}}();!function(){const c=document.getElementById("content");n.createDemoData(),c.appendChild(function(e){const t=document.createElement("header");t.classList.add("header");const n=document.createElement("h2");return n.textContent=e,n.classList.add("siteTitle"),t.appendChild(n),t}("JustDoIt")),c.appendChild(function(){const n=document.createElement("main"),c=function(){const e=document.createElement("div");return e.id="controlPanel",e}(),o=function(){const e=document.createElement("div");return e.id="dataPanel",e}();n.appendChild(c),n.appendChild(o);const d=function(){const t=document.createElement("div");return t.classList.add("inbox"),t.classList.add("border"),t.addEventListener("click",e.displayTodos),t}();d.appendChild(function(){const e=document.createElement("h3");return e.textContent="Inbox",e.classList.add("project"),e.classList.add("active"),e.classList.add("projectHeader"),e.id="Inbox",e}()),c.appendChild(d);const s=function(){const e=document.createElement("div");return e.classList.add("projects"),e}();return s.appendChild(function(){const e=document.createElement("h3");return e.textContent="Projects",e.classList.add("projectHeader"),e.classList.add("border"),e}()),s.appendChild(function(){const n=JSON.parse(localStorage.getItem("allProjects")),a=document.createElement("ul");return a.classList.add("projectsContainer"),n.forEach((n=>{const c=document.createElement("li");c.classList.add("listContainer");const o=document.createElement("span");o.textContent=n.name,o.classList.add("project"),o.id=n.name,o.addEventListener("click",e.displayTodos);const d=document.createElement("i");d.classList.add("fa-solid"),d.classList.add("fa-circle-minus"),d.addEventListener("click",t.deleteProject),a.appendChild(c),c.appendChild(o),c.appendChild(d)})),a}()),s.appendChild(function(){const e=document.createElement("div");e.classList.add("newProjectContainer");const t=document.createElement("button");return t.textContent="NEW PROJECT",t.classList.add("newProjectBtn"),t.addEventListener("click",a.addProject),e.appendChild(t),e}()),c.appendChild(s),o.appendChild(e.createInboxTodos()),n}()),c.appendChild(function(e){const t=document.createElement("footer");t.classList.add("footer");const n=document.createElement("p");return n.textContent=`Â© by ${e}`,n.classList.add("copyright"),t.appendChild(n),t}("Zachary Truong"))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L0QsVUFBVUMsSUFBSSxtQkFDL0I4RCxFQUFpQjdCLGlCQUFpQixRQUFTLEVBQUF1QixlQUMzQ2IsRUFBa0JuQyxZQUFZSCxHQUM5QkEsRUFBS0csWUFBWUQsR0FDakJGLEVBQUtHLFlBQVlzRCxNQUVabkIsRUFqRWlCVSxJQUMxQnVELEVBQWNwRyxZQWtFZCxXQUNFLE1BQU15RyxFQUFNcEgsU0FBU0MsY0FBYyxPQUNuQ21ILEVBQUlsSCxVQUFVQyxJQUFJLHVCQUNsQixNQUFNa0gsRUFBTXJILFNBQVNDLGNBQWMsVUFLbkMsT0FKQW9ILEVBQUk1RyxZQUFjLGNBQ2xCNEcsRUFBSW5ILFVBQVVDLElBQUksaUJBQ2xCa0gsRUFBSWpGLGlCQUFpQixRQUFTLEVBQUEwRCxZQUM5QnNCLEVBQUl6RyxZQUFZMEcsR0FDVEQsRUExRWlCRSxJQUUxQmQsRUFBYTdGLFlBQVlvRyxHQUV6QnZGLEVBQVViLFlBQVksc0JBd0VmNEYsRURqRmUsSUFDcEI3RixFQUFRQyxZRWZTLFNBQVM0RyxHQUM1QixNQUFNQyxFQUFTeEgsU0FBU0MsY0FBYyxVQUN0Q3VILEVBQU90SCxVQUFVQyxJQUFJLFVBRXJCLE1BQU1zSCxFQUFPekgsU0FBU0MsY0FBYyxLQUtwQyxPQUpBd0gsRUFBS2hILFlBQWMsUUFBUThHLElBQzNCRSxFQUFLdkgsVUFBVUMsSUFBSSxhQUVuQnFILEVBQU83RyxZQUFZOEcsR0FDWkQsRUZNZSxDQUFhLG1CQVZyQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanVzdGRvaXQvLi9zcmMvaGVhZGVyLmpzIiwid2VicGFjazovL2p1c3Rkb2l0Ly4vc3JjL3Nob3dUb2Rvcy5qcyIsIndlYnBhY2s6Ly9qdXN0ZG9pdC8uL3NyYy9kZWxldGVQcm9qZWN0LmpzIiwid2VicGFjazovL2p1c3Rkb2l0Ly4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vanVzdGRvaXQvLi9zcmMvYWRkUHJvamVjdC5qcyIsIndlYnBhY2s6Ly9qdXN0ZG9pdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9qdXN0ZG9pdC8uL3NyYy9tYWluLmpzIiwid2VicGFjazovL2p1c3Rkb2l0Ly4vc3JjL2Zvb3Rlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjcmVhdGVIZWFkZXIgPSBmdW5jdGlvbihzaXRlVGl0bGUpIHtcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XG4gIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gIHRpdGxlLnRleHRDb250ZW50ID0gc2l0ZVRpdGxlO1xuICB0aXRsZS5jbGFzc0xpc3QuYWRkKCdzaXRlVGl0bGUnKTtcblxuICBoZWFkZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICByZXR1cm4gaGVhZGVyO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlSGVhZGVyOyIsImNvbnN0IHNob3dUb2RvcyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gc2V0QWN0aXZlUHJvamVjdChlKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Byb2plY3QnKSk7XG4gICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7ZS50YXJnZXQuaWR9YCk7XG4gICAgYWxsUHJvamVjdHMuZm9yRWFjaCggcHJvamVjdCA9PiB7XG4gICAgICBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfTtcbiAgZnVuY3Rpb24gY2xlYXIobm9kZSkge1xuICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVRvZG9zKGUpIHtcbiAgICBzZXRBY3RpdmVQcm9qZWN0KGUpO1xuICAgIGNsZWFyKGRhdGFQYW5lbCk7XG4gICAgaWYgKGUudGFyZ2V0LmlkID09PSAnSW5ib3gnKSB7XG4gICAgICBkYXRhUGFuZWwuYXBwZW5kQ2hpbGQoY3JlYXRlSW5ib3hUb2RvcygpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YVBhbmVsLmFwcGVuZENoaWxkKGNyZWF0ZVByb2plY3RUb2RvcyhlKSk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBjcmVhdGVJbmJveFRvZG9zKCkge1xuICAgIGNvbnN0IGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWxsUHJvamVjdHMnKSk7XG4gICAgY29uc3QgZGF0YUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBkYXRhQmxvY2suY2xhc3NMaXN0LmFkZCgndG9kb3MnKTtcbiAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKCBwcm9qZWN0ID0+IHtcbiAgICAgIHByb2plY3QudG9kb3MuZm9yRWFjaCggdG9kbyA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBsaXN0LnRleHRDb250ZW50ID0gdG9kby5jb250ZW50O1xuICAgICAgICBkYXRhQmxvY2suYXBwZW5kQ2hpbGQobGlzdCk7XG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIGRhdGFCbG9ja1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RUb2RvcyhlKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhbGxQcm9qZWN0cycpKTtcbiAgICBjb25zdCBkYXRhQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIGRhdGFCbG9jay5jbGFzc0xpc3QuYWRkKCd0b2RvcycpO1xuICAgIGNvbnN0IHRhcmdldCA9IGFsbFByb2plY3RzLmZpbmQoIHByb2plY3QgPT4gcHJvamVjdFsnbmFtZSddID09PSBlLnRhcmdldC5pZCk7XG4gICAgdGFyZ2V0LnRvZG9zLmZvckVhY2goIHRvZG8gPT4ge1xuICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtdGhpbicpO1xuICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBsaXN0LnRleHRDb250ZW50ID0gdG9kby5jb250ZW50O1xuICAgICAgZGF0YUJsb2NrLmFwcGVuZENoaWxkKGxpc3QpO1xuICAgIH0pXG4gICAgcmV0dXJuIGRhdGFCbG9jaztcbiAgfVxuICByZXR1cm4ge1xuICAgIGRpc3BsYXlUb2RvcywgXG4gICAgY3JlYXRlSW5ib3hUb2RvcyxcbiAgICBjcmVhdGVQcm9qZWN0VG9kb3NcbiAgfVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgc2hvd1RvZG9zOyIsImNvbnN0IGRlbGV0ZVByb2plY3QgPSAoIGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBjcmVhdGVQb3B1cCgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbW9kYWxDb250YWluZXInKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZmFkZUluJyk7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbCcpO1xuICAgIG1vZGFsLmFwcGVuZENoaWxkKGNyZWF0ZU5vdGlmaWNhdGlvblRleHQoKSk7XG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoY3JlYXRlQWN0aW9ucygpKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlTm90aWZpY2F0aW9uVGV4dCgpIHtcbiAgICBjb25zdCBhbGVydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdhbGVydCcpO1xuICAgIGFsZXJ0LnRleHRDb250ZW50ID0gJ0FyZSB5b3Ugc3VyZT8gRGVsZXRpbmcgcHJvamVjdCB3aWxsIGRlbGV0ZSBhbGwgdG9kb3MgYmVsb25nIHRvIGl0ISc7XG4gICAgcmV0dXJuIGFsZXJ0O1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbnMoKSB7XG4gICAgY29uc3QgYWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFjdGlvbnMuY2xhc3NMaXN0LmFkZCgnYWN0aW9ucycpO1xuICAgIGFjdGlvbnMuYXBwZW5kQ2hpbGQoY3JlYXRlQ2FuY2VsQnRuKCkpO1xuICAgIGFjdGlvbnMuYXBwZW5kQ2hpbGQoY3JlYXRlQWdyZWVCdG4oKSk7XG4gICAgcmV0dXJuIGFjdGlvbnM7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlQ2FuY2VsQnRuKCkge1xuICAgIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNhbmNlbC50ZXh0Q29udGVudCA9ICdObyc7XG4gICAgY2FuY2VsLmNsYXNzTGlzdC5hZGQoJ2NhbmNlbCcpO1xuICAgIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbEJ0bkFjdGlvbik7XG4gICAgcmV0dXJuIGNhbmNlbDtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVBZ3JlZUJ0bigpIHtcbiAgICBjb25zdCBhZ3JlZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGFncmVlLnRleHRDb250ZW50ID0gJ1llcyc7XG4gICAgYWdyZWUuY2xhc3NMaXN0LmFkZCgnYWdyZWUnKTtcbiAgICBhZ3JlZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFncmVlQnRuQWN0aW9uKTtcbiAgICByZXR1cm4gYWdyZWU7XG4gIH1cbiAgZnVuY3Rpb24gY2FuY2VsQnRuQWN0aW9uKGUpIHtcbiAgICBjb25zdCBtb2RhbENvbnRhaW5lciA9IHRoaXMuY2xvc2VzdCgnLm1vZGFsQ29udGFpbmVyJylcbiAgICBtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTtcbiAgICBtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmYWRlT3V0Jyk7XG4gICAgbW9kYWxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4ge1xuICAgICAgbW9kYWxDb250YWluZXIucmVtb3ZlKCk7XG4gICAgfSlcbiAgfVxuICBmdW5jdGlvbiBhZ3JlZUJ0bkFjdGlvbihlKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSByZXRyaWV2ZUxvY2FsU3RvcmFnZSgnYWxsUHJvamVjdHMnKTtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmNsb3Nlc3QoJy5saXN0Q29udGFpbmVyJyk7XG4gICAgY29uc3QgcHJvamVjdHNEaXYgPSB0aGlzLmNsb3Nlc3QoJy5wcm9qZWN0cycpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gdGhpcy5jbG9zZXN0KCcucHJvamVjdHNDb250YWluZXInKTtcbiAgICBjb25zdCB0YXJnZXRJbmRleCA9IGFsbFByb2plY3RzLmZpbmRJbmRleCggcHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT09IHBhcmVudC5maXJzdENoaWxkLmlkKTtcbiAgICBhbGxQcm9qZWN0cy5zcGxpY2UodGFyZ2V0SW5kZXgsIDEpO1xuICAgIHVwZGF0ZUxvY2FsU3RvcmFnZShhbGxQcm9qZWN0cyk7XG4gICAgc2V0QWN0aXZlKCdJbmJveCcpO1xuICAgIGNsZWFyKGRhdGFQYW5lbCk7XG4gICAgcHJvamVjdHNDb250YWluZXIucmVtb3ZlKCk7XG4gICAgcHJvamVjdHNEaXYuaW5zZXJ0QmVmb3JlKGNyZWF0ZVByb2plY3RzTGlzdCgpLCBwcm9qZWN0c0Rpdi5sYXN0Q2hpbGQpO1xuICAgIGRhdGFQYW5lbC5hcHBlbmRDaGlsZChjcmVhdGVJbmJveFRvZG9zKCkpO1xuICAgIChjYW5jZWxCdG5BY3Rpb24uYmluZCh0aGlzKSkoKTtcbiAgfVxuICBmdW5jdGlvbiBkZWxldGVQcm9qZWN0KGUpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlUG9wdXAoKSk7XG4gIH1cbiAgZnVuY3Rpb24gdXBkYXRlTG9jYWxTdG9yYWdlKGRhdGEpIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FsbFByb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICB9XG4gIGZ1bmN0aW9uIHJldHJpZXZlTG9jYWxTdG9yYWdlKGRhdGEpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShkYXRhKSk7XG4gIH1cbiAgZnVuY3Rpb24gc2V0QWN0aXZlKGlkKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Byb2plY3QnKSk7XG4gICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGFsbFByb2plY3RzLmZvckVhY2goIHByb2plY3QgPT4ge1xuICAgICAgcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH07XG4gIGZ1bmN0aW9uIGNsZWFyKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0c0xpc3QoKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhbGxQcm9qZWN0cycpKTtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgcHJvamVjdHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvamVjdHNDb250YWluZXInKTtcbiAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKCBwcm9qZWN0ID0+IHtcbiAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdsaXN0Q29udGFpbmVyJyk7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgY29udGVudC50ZXh0Q29udGVudCA9IHByb2plY3RbJ25hbWUnXTtcbiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpO1xuICAgICAgY29udGVudC5pZCA9IHByb2plY3QubmFtZTtcbiAgICAgIGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkaXNwbGF5VG9kb3MpO1xuICAgICAgY29uc3QgZGVsZXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKTtcbiAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZCgnZmEtY2lyY2xlLW1pbnVzJyk7XG4gICAgICBkZWxldGVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlUHJvamVjdCk7XG4gICAgICBwcm9qZWN0c0NvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0KTtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKGRlbGV0ZVByb2plY3RCdG4pO1xuICAgIH0pO1xuICAgIHJldHVybiBwcm9qZWN0c0NvbnRhaW5lcjtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVJbmJveFRvZG9zKCkge1xuICAgIGNvbnN0IGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWxsUHJvamVjdHMnKSk7XG4gICAgY29uc3QgZGF0YUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBkYXRhQmxvY2suY2xhc3NMaXN0LmFkZCgndG9kb3MnKTtcbiAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKCBwcm9qZWN0ID0+IHtcbiAgICAgIHByb2plY3QudG9kb3MuZm9yRWFjaCggdG9kbyA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBsaXN0LnRleHRDb250ZW50ID0gdG9kby5jb250ZW50O1xuICAgICAgICBkYXRhQmxvY2suYXBwZW5kQ2hpbGQobGlzdCk7XG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIGRhdGFCbG9ja1xuICB9XG4gIGZ1bmN0aW9uIHNldEFjdGl2ZVByb2plY3QoZSkge1xuICAgIGNvbnN0IGFsbFByb2plY3RzID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwcm9qZWN0JykpO1xuICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2UudGFyZ2V0LmlkfWApO1xuICAgIGFsbFByb2plY3RzLmZvckVhY2goIHByb2plY3QgPT4ge1xuICAgICAgcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH07XG4gIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RUb2RvcyhlKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhbGxQcm9qZWN0cycpKTtcbiAgICBjb25zdCBkYXRhQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIGRhdGFCbG9jay5jbGFzc0xpc3QuYWRkKCd0b2RvcycpO1xuICAgIGNvbnN0IHRhcmdldCA9IGFsbFByb2plY3RzLmZpbmQoIHByb2plY3QgPT4gcHJvamVjdFsnbmFtZSddID09PSBlLnRhcmdldC5pZCk7XG4gICAgdGFyZ2V0LnRvZG9zLmZvckVhY2goIHRvZG8gPT4ge1xuICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtdGhpbicpO1xuICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBsaXN0LnRleHRDb250ZW50ID0gdG9kby5jb250ZW50O1xuICAgICAgZGF0YUJsb2NrLmFwcGVuZENoaWxkKGxpc3QpO1xuICAgIH0pXG4gICAgcmV0dXJuIGRhdGFCbG9jaztcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5VG9kb3MoZSkge1xuICAgIHNldEFjdGl2ZVByb2plY3QoZSk7XG4gICAgY2xlYXIoZGF0YVBhbmVsKTtcbiAgICBpZiAoZS50YXJnZXQuaWQgPT09ICdJbmJveCcpIHtcbiAgICAgIGRhdGFQYW5lbC5hcHBlbmRDaGlsZChjcmVhdGVJbmJveFRvZG9zKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhUGFuZWwuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdFRvZG9zKGUpKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgZGVsZXRlUHJvamVjdCxcbiAgICByZXRyaWV2ZUxvY2FsU3RvcmFnZSxcbiAgICB1cGRhdGVMb2NhbFN0b3JhZ2UsXG4gICAgY2xlYXIsXG4gICAgc2V0QWN0aXZlLFxuICAgIGNyZWF0ZUFjdGlvbnMsXG4gICAgY3JlYXRlQWdyZWVCdG4sXG4gICAgY3JlYXRlQ2FuY2VsQnRuLFxuICAgIGNyZWF0ZUluYm94VG9kb3MsXG4gICAgY3JlYXRlTm90aWZpY2F0aW9uVGV4dCxcbiAgICBjcmVhdGVQb3B1cCxcbiAgICBjcmVhdGVQcm9qZWN0VG9kb3MsXG4gICAgY3JlYXRlUHJvamVjdHNMaXN0LFxuICB9XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBkZWxldGVQcm9qZWN0OyIsImNvbnN0IGRhdGEgPSAoIGZ1bmN0aW9uKCkge1xuXG4gIGNvbnN0IGFsbFByb2plY3RzID0gW107XG5cbiAgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgIHRoaXMudG9kb3MgPSBbXTtcbiAgICB9XG4gIH1cbiAgY2xhc3MgdG9kbyB7XG4gICAgY29uc3RydWN0b3IoY29udGVudCkge1xuICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGNyZWF0ZURlbW9EYXRhKCkge1xuICAgIGNvbnN0IGNsZWFuaW5nID0gbmV3IFByb2plY3QoJ0NsZWFuaW5nJyk7XG4gICAgY29uc3QgbGF1bmRyeSA9IG5ldyBQcm9qZWN0KCdMYXVuZHJ5Jyk7XG4gICAgY29uc3Qgc2hvcHBpbmcgPSBuZXcgUHJvamVjdCgnU2hvcHBpbmcnKTtcbiAgICBhbGxQcm9qZWN0cy5wdXNoKGNsZWFuaW5nKTtcbiAgICBhbGxQcm9qZWN0cy5wdXNoKGxhdW5kcnkpO1xuICAgIGFsbFByb2plY3RzLnB1c2goc2hvcHBpbmcpO1xuICBcbiAgICBjb25zdCBzd2VlcGluZyA9IG5ldyB0b2RvKCdTd2VlcGluZyB0aGUgZmxvb3IuJyk7XG4gICAgY29uc3QgdmFjdXVtID0gbmV3IHRvZG8oJ1ZhY3V1bWluZyB0aGUgZmxvb3IuJyk7XG4gICAgY29uc3Qgd2FzaGluZyA9IG5ldyB0b2RvKCdXYXNoaW5nIHRoZSBmaWx0ZXIuJyk7XG4gICAgY29uc3QgbmVja2xhY2UgPSBuZXcgdG9kbygnQnV5IG5ldyBuZWNrbGFjZS4nKTtcbiAgICBjb25zdCB3YXNoID0gbmV3IHRvZG8oJ1B1dCBjbG90aGVzIGluIHdhc2hlciBtYWNoaW5lLicpO1xuICAgIGNvbnN0IGRyeSA9IG5ldyB0b2RvKCdQdXQgY2xvdGhlcyBpbiBkcnllci4nKTtcbiAgICBjbGVhbmluZy50b2Rvcy5wdXNoKHN3ZWVwaW5nKTtcbiAgICBjbGVhbmluZy50b2Rvcy5wdXNoKHZhY3V1bSk7XG4gICAgY2xlYW5pbmcudG9kb3MucHVzaCh3YXNoaW5nKTtcbiAgICBsYXVuZHJ5LnRvZG9zLnB1c2god2FzaCk7XG4gICAgbGF1bmRyeS50b2Rvcy5wdXNoKGRyeSk7XG4gICAgc2hvcHBpbmcudG9kb3MucHVzaChuZWNrbGFjZSk7XG4gIFxuICAgIGlmIChzdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FsbFByb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKTtcbiAgICB9XG4gICAgZWxzZSByZXR1cm47XG4gIH1cbiAgZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSh0eXBlKSB7XG4gICAgdmFyIHN0b3JhZ2U7XG4gICAgdHJ5IHtcbiAgICAgICAgc3RvcmFnZSA9IHdpbmRvd1t0eXBlXTtcbiAgICAgICAgdmFyIHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XG4gICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcbiAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgKFxuICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcbiAgICAgICAgICBlLmNvZGUgPT09IDIyIHx8XG4gICAgICAgICAgLy8gRmlyZWZveFxuICAgICAgICAgIGUuY29kZSA9PT0gMTAxNCB8fFxuICAgICAgICAgIC8vIHRlc3QgbmFtZSBmaWVsZCB0b28sIGJlY2F1c2UgY29kZSBtaWdodCBub3QgYmUgcHJlc2VudFxuICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcbiAgICAgICAgICBlLm5hbWUgPT09ICdRdW90YUV4Y2VlZGVkRXJyb3InIHx8XG4gICAgICAgICAgLy8gRmlyZWZveFxuICAgICAgICAgIGUubmFtZSA9PT0gJ05TX0VSUk9SX0RPTV9RVU9UQV9SRUFDSEVEJykgJiZcbiAgICAgICAgICAvLyBhY2tub3dsZWRnZSBRdW90YUV4Y2VlZGVkRXJyb3Igb25seSBpZiB0aGVyZSdzIHNvbWV0aGluZyBhbHJlYWR5IHN0b3JlZFxuICAgICAgICAgIChzdG9yYWdlICYmIHN0b3JhZ2UubGVuZ3RoICE9PSAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICByZXR1cm4ge1xuICAgIFByb2plY3QsXG4gICAgdG9kbyxcbiAgICBjcmVhdGVEZW1vRGF0YSxcbiAgfVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgZGF0YTsiLCJpbXBvcnQgZGF0YSBmcm9tICcuL2RhdGEnO1xuaW1wb3J0IGRlbGV0ZVByb2plY3QgZnJvbSAnLi9kZWxldGVQcm9qZWN0JztcbmNvbnN0IGFkZFByb2plY3QgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9qZWN0KGUpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlQWRkUG9wdXAoKSk7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlQWRkUG9wdXAoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsQ29udGFpbmVyJyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2ZhZGVJbicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVOZXdQcm9qZWN0Rm9ybSgpKTtcbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2plY3RGb3JtKCkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwnKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdmbGV4Jyk7XG4gICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ25ld1Byb2plY3ROYW1lJyk7XG4gICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgnbGFiZWwnKTtcbiAgICBsYWJlbC50ZXh0Q29udGVudCA9ICdFbnRlciB0aGUgbmFtZSBmb3IgdGhlIHByb2plY3Q6JztcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQuaWQgPSAnbmV3UHJvamVjdE5hbWUnO1xuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgc3VibWl0LmNsYXNzTGlzdC5hZGQoJ3N1Ym1pdCcpO1xuICAgIHN1Ym1pdC50ZXh0Q29udGVudCA9ICdTdWJtaXQnO1xuICAgIHN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZE5ld1Byb2plY3QpO1xuICAgIG1vZGFsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoc3VibWl0KTtcblxuICAgIHJldHVybiBtb2RhbDtcbiAgfVxuICBmdW5jdGlvbiBhZGROZXdQcm9qZWN0KGUpIHtcbiAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3UHJvamVjdE5hbWUnKTtcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IGRhdGEuUHJvamVjdChpbnB1dC52YWx1ZSk7XG4gICAgY29uc3QgYWxsUHJvamVjdHMgPSBkZWxldGVQcm9qZWN0LnJldHJpZXZlTG9jYWxTdG9yYWdlKCdhbGxQcm9qZWN0cycpO1xuICAgIGNvbnN0IHByb2plY3RzRGl2ID0gdGhpcy5jbG9zZXN0KCcucHJvamVjdHMnKTtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmNsb3Nlc3QoJy5wcm9qZWN0cycpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gcGFyZW50LmNoaWxkcmVuWzFdO1xuICAgIHBhcmVudC5yZW1vdmVDaGlsZChwcm9qZWN0c0NvbnRhaW5lcik7XG4gICAgYWxsUHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICBkZWxldGVQcm9qZWN0LnVwZGF0ZUxvY2FsU3RvcmFnZShhbGxQcm9qZWN0cyk7XG4gICAgZGVsZXRlUHJvamVjdC5jbGVhcihkYXRhUGFuZWwpO1xuICAgIHByb2plY3RzQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgIGRlbGV0ZVByb2plY3Quc2V0QWN0aXZlKCdJbmJveCcpO1xuICAgIHByb2plY3RzRGl2Lmluc2VydEJlZm9yZShjcmVhdGVQcm9qZWN0c0xpc3QoKSwgcHJvamVjdHNEaXYubGFzdENoaWxkKTtcbiAgICBkYXRhUGFuZWwuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdC5jcmVhdGVJbmJveFRvZG9zKCkpO1xuICAgIHRoaXMuY2xvc2VzdCgnLm1vZGFsQ29udGFpbmVyJykucmVtb3ZlKCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVRvZG9zKGUpIHtcbiAgICBkZWxldGVQcm9qZWN0LnNldEFjdGl2ZVByb2plY3QoZSk7XG4gICAgZGVsZXRlUHJvamVjdC5jbGVhcihkYXRhUGFuZWwpO1xuICAgIGlmIChlLnRhcmdldC5pZCA9PT0gJ0luYm94Jykge1xuICAgICAgZGF0YVBhbmVsLmFwcGVuZENoaWxkKGRlbGV0ZVByb2plY3QuY3JlYXRlSW5ib3hUb2RvcygpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YVBhbmVsLmFwcGVuZENoaWxkKGRlbGV0ZVByb2plY3QuY3JlYXRlUHJvamVjdFRvZG9zKGUpKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RzTGlzdCgpIHtcbiAgICBjb25zdCBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbFByb2plY3RzJykpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0c0NvbnRhaW5lcicpO1xuICAgIGFsbFByb2plY3RzLmZvckVhY2goIHByb2plY3QgPT4ge1xuICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ2xpc3RDb250YWluZXInKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb250ZW50LnRleHRDb250ZW50ID0gcHJvamVjdFsnbmFtZSddO1xuICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG4gICAgICBjb250ZW50LmlkID0gcHJvamVjdC5uYW1lO1xuICAgICAgY29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRpc3BsYXlUb2Rvcyk7XG4gICAgICBjb25zdCBkZWxldGVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgZGVsZXRlUHJvamVjdEJ0bi5jbGFzc0xpc3QuYWRkKCdmYS1zb2xpZCcpO1xuICAgICAgZGVsZXRlUHJvamVjdEJ0bi5jbGFzc0xpc3QuYWRkKCdmYS1jaXJjbGUtbWludXMnKTtcbiAgICAgIGRlbGV0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVQcm9qZWN0LmRlbGV0ZVByb2plY3QpO1xuICAgICAgcHJvamVjdHNDb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdCk7XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgbGlzdC5hcHBlbmRDaGlsZChkZWxldGVQcm9qZWN0QnRuKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvamVjdHNDb250YWluZXI7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhZGRQcm9qZWN0LFxuICB9XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBhZGRQcm9qZWN0OyIsImltcG9ydCBjcmVhdGVIZWFkZXIgZnJvbSBcIi4vaGVhZGVyXCI7XG5pbXBvcnQgY3JlYXRlTWFpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgY3JlYXRlRm9vdGVyIGZyb20gXCIuL2Zvb3RlclwiO1xuaW1wb3J0IGRhdGEgZnJvbSBcIi4vZGF0YVwiO1xuXG4oIGZ1bmN0aW9uIHRvZG9BcHAoKSB7XG4gIFxuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcblxuICBfaW5pdCgpO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIGRhdGEuY3JlYXRlRGVtb0RhdGEoKTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGNyZWF0ZUhlYWRlcignSnVzdERvSXQnKSk7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChjcmVhdGVNYWluKCkpO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY3JlYXRlRm9vdGVyKCdaYWNoYXJ5IFRydW9uZycpKTtcbiAgfVxuXG59KSgpOyIsImltcG9ydCBzaG93VG9kb3MgZnJvbSBcIi4vc2hvd1RvZG9zXCI7XG5pbXBvcnQgZGVsZXRlUHJvamVjdCBmcm9tIFwiLi9kZWxldGVQcm9qZWN0XCI7XG5pbXBvcnQgYWRkUHJvamVjdCBmcm9tICcuL2FkZFByb2plY3QuanMnO1xuXG5jb25zdCBjcmVhdGVNYWluID0gZnVuY3Rpb24oKSB7XG5cbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21haW4nKTtcbiAgY29uc3QgY29udHJvbFBhbmVsID0gY3JlYXRlQ29udHJvbFBhbmVsKCk7XG4gIGNvbnN0IGRhdGFQYW5lbCA9IGNyZWF0ZURhdGFQYW5lbCgpO1xuICBtYWluLmFwcGVuZENoaWxkKGNvbnRyb2xQYW5lbCk7XG4gIG1haW4uYXBwZW5kQ2hpbGQoZGF0YVBhbmVsKTtcblxuICBjb25zdCBpbmJveCA9IGNyZWF0ZUluYm94KCk7XG4gIGluYm94LmFwcGVuZENoaWxkKGNyZWF0ZUluYm94VGl0bGUoKSk7XG4gIGNvbnRyb2xQYW5lbC5hcHBlbmRDaGlsZChpbmJveCk7XG4gIFxuICBjb25zdCBwcm9qZWN0c0Jsb2NrID0gY3JlYXRlUHJvamVjdHNCbG9jaygpO1xuICBwcm9qZWN0c0Jsb2NrLmFwcGVuZENoaWxkKGNyZWF0ZVByb2plY3RzVGl0bGUoKSk7XG4gIHByb2plY3RzQmxvY2suYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdHNMaXN0KCkpO1xuICBwcm9qZWN0c0Jsb2NrLmFwcGVuZENoaWxkKGNyZWF0ZU5ld1Byb2plY3RCdG4oKSk7XG5cbiAgY29udHJvbFBhbmVsLmFwcGVuZENoaWxkKHByb2plY3RzQmxvY2spO1xuXG4gIGRhdGFQYW5lbC5hcHBlbmRDaGlsZChzaG93VG9kb3MuY3JlYXRlSW5ib3hUb2RvcygpKTtcbiAgXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xQYW5lbCgpIHtcbiAgICBjb25zdCBjb250cm9sUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250cm9sUGFuZWwuaWQgPSAnY29udHJvbFBhbmVsJztcbiAgICByZXR1cm4gY29udHJvbFBhbmVsO1xuICB9O1xuICBmdW5jdGlvbiBjcmVhdGVEYXRhUGFuZWwoKSB7XG4gICAgY29uc3QgZGF0YVBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGF0YVBhbmVsLmlkID0gJ2RhdGFQYW5lbCc7XG4gICAgcmV0dXJuIGRhdGFQYW5lbDtcbiAgfTtcbiAgZnVuY3Rpb24gY3JlYXRlSW5ib3goKSB7XG4gICAgY29uc3QgaW5ib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpbmJveC5jbGFzc0xpc3QuYWRkKCdpbmJveCcpO1xuICAgIGluYm94LmNsYXNzTGlzdC5hZGQoJ2JvcmRlcicpO1xuICAgIGluYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd1RvZG9zLmRpc3BsYXlUb2Rvcyk7XG4gICAgcmV0dXJuIGluYm94O1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZUluYm94VGl0bGUoKSB7XG4gICAgY29uc3QgaW5ib3hUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgaW5ib3hUaXRsZS50ZXh0Q29udGVudCA9ICdJbmJveCc7XG4gICAgaW5ib3hUaXRsZS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG4gICAgaW5ib3hUaXRsZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBpbmJveFRpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RIZWFkZXInKTtcbiAgICBpbmJveFRpdGxlLmlkID0gJ0luYm94JztcbiAgICByZXR1cm4gaW5ib3hUaXRsZTtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0c0Jsb2NrKCkge1xuICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdHMuY2xhc3NMaXN0LmFkZCgncHJvamVjdHMnKTtcbiAgICByZXR1cm4gcHJvamVjdHM7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdHNUaXRsZSgpIHtcbiAgICBjb25zdCBwcm9qZWN0c1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICBwcm9qZWN0c1RpdGxlLnRleHRDb250ZW50ID0gJ1Byb2plY3RzJztcbiAgICBwcm9qZWN0c1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RIZWFkZXInKTtcbiAgICBwcm9qZWN0c1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2JvcmRlcicpO1xuICAgIHJldHVybiBwcm9qZWN0c1RpdGxlO1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RzTGlzdCgpIHtcbiAgICBjb25zdCBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbFByb2plY3RzJykpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0c0NvbnRhaW5lcicpO1xuICAgIGFsbFByb2plY3RzLmZvckVhY2goIHByb2plY3QgPT4ge1xuICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ2xpc3RDb250YWluZXInKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb250ZW50LnRleHRDb250ZW50ID0gcHJvamVjdFsnbmFtZSddO1xuICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG4gICAgICBjb250ZW50LmlkID0gcHJvamVjdC5uYW1lO1xuICAgICAgY29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dUb2Rvcy5kaXNwbGF5VG9kb3MpO1xuICAgICAgY29uc3QgZGVsZXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKTtcbiAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZCgnZmEtY2lyY2xlLW1pbnVzJyk7XG4gICAgICBkZWxldGVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlUHJvamVjdC5kZWxldGVQcm9qZWN0KTtcbiAgICAgIHByb2plY3RzQ29udGFpbmVyLmFwcGVuZENoaWxkKGxpc3QpO1xuICAgICAgbGlzdC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdEJ0bik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb2plY3RzQ29udGFpbmVyO1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2plY3RCdG4oKSB7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ25ld1Byb2plY3RDb250YWluZXInKTtcbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidG4udGV4dENvbnRlbnQgPSAnTkVXIFBST0pFQ1QnO1xuICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCduZXdQcm9qZWN0QnRuJyk7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUHJvamVjdC5hZGRQcm9qZWN0KTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgICByZXR1cm4gZGl2O1xuICB9XG4gIHJldHVybiBtYWluO1xuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVNYWluOyIsImNvbnN0IGNyZWF0ZUZvb3RlciA9IGZ1bmN0aW9uKGF1dGhvcikge1xuICBjb25zdCBmb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb290ZXInKTtcbiAgZm9vdGVyLmNsYXNzTGlzdC5hZGQoJ2Zvb3RlcicpO1xuXG4gIGNvbnN0IHBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHBhcmEudGV4dENvbnRlbnQgPSBgwqkgYnkgJHthdXRob3J9YDtcbiAgcGFyYS5jbGFzc0xpc3QuYWRkKCdjb3B5cmlnaHQnKTtcblxuICBmb290ZXIuYXBwZW5kQ2hpbGQocGFyYSk7XG4gIHJldHVybiBmb290ZXI7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVGb290ZXI7Il0sIm5hbWVzIjpbImNyZWF0ZUluYm94VG9kb3MiLCJhbGxQcm9qZWN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkYXRhQmxvY2siLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJmb3JFYWNoIiwicHJvamVjdCIsInRvZG9zIiwidG9kbyIsImxpc3QiLCJ0ZXh0Q29udGVudCIsImNvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVByb2plY3RUb2RvcyIsImUiLCJmaW5kIiwidGFyZ2V0IiwiaWQiLCJkaXNwbGF5VG9kb3MiLCJBcnJheSIsImZyb20iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmUiLCJzZXRBY3RpdmVQcm9qZWN0IiwiZGF0YVBhbmVsIiwiaW5uZXJIVE1MIiwiY3JlYXRlUG9wdXAiLCJjb250YWluZXIiLCJtb2RhbCIsImNyZWF0ZU5vdGlmaWNhdGlvblRleHQiLCJjcmVhdGVBY3Rpb25zIiwiYWxlcnQiLCJhY3Rpb25zIiwiY3JlYXRlQ2FuY2VsQnRuIiwiY3JlYXRlQWdyZWVCdG4iLCJjYW5jZWwiLCJhZGRFdmVudExpc3RlbmVyIiwiY2FuY2VsQnRuQWN0aW9uIiwiYWdyZWUiLCJhZ3JlZUJ0bkFjdGlvbiIsIm1vZGFsQ29udGFpbmVyIiwidGhpcyIsImNsb3Nlc3QiLCJyZXRyaWV2ZUxvY2FsU3RvcmFnZSIsInBhcmVudCIsInByb2plY3RzRGl2IiwicHJvamVjdHNDb250YWluZXIiLCJ0YXJnZXRJbmRleCIsImZpbmRJbmRleCIsIm5hbWUiLCJmaXJzdENoaWxkIiwic3BsaWNlIiwidXBkYXRlTG9jYWxTdG9yYWdlIiwic2V0QWN0aXZlIiwiY2xlYXIiLCJpbnNlcnRCZWZvcmUiLCJjcmVhdGVQcm9qZWN0c0xpc3QiLCJsYXN0Q2hpbGQiLCJiaW5kIiwiZGVsZXRlUHJvamVjdCIsInBhcmVudEVsZW1lbnQiLCJkYXRhIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIm5vZGUiLCJkZWxldGVQcm9qZWN0QnRuIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlRGVtb0RhdGEiLCJjbGVhbmluZyIsImxhdW5kcnkiLCJzaG9wcGluZyIsInB1c2giLCJzd2VlcGluZyIsInZhY3V1bSIsIndhc2hpbmciLCJuZWNrbGFjZSIsIndhc2giLCJkcnkiLCJ0eXBlIiwic3RvcmFnZSIsIndpbmRvdyIsIngiLCJyZW1vdmVJdGVtIiwiRE9NRXhjZXB0aW9uIiwiY29kZSIsImxlbmd0aCIsInN0b3JhZ2VBdmFpbGFibGUiLCJhZGROZXdQcm9qZWN0IiwiaW5wdXQiLCJuZXdQcm9qZWN0IiwidmFsdWUiLCJjaGlsZHJlbiIsInJlbW92ZUNoaWxkIiwiYWRkUHJvamVjdCIsImxhYmVsIiwic2V0QXR0cmlidXRlIiwic3VibWl0IiwiY3JlYXRlTmV3UHJvamVjdEZvcm0iLCJjcmVhdGVBZGRQb3B1cCIsInNpdGVUaXRsZSIsImhlYWRlciIsInRpdGxlIiwibWFpbiIsImNvbnRyb2xQYW5lbCIsImNyZWF0ZUNvbnRyb2xQYW5lbCIsImNyZWF0ZURhdGFQYW5lbCIsImluYm94IiwiY3JlYXRlSW5ib3giLCJpbmJveFRpdGxlIiwiY3JlYXRlSW5ib3hUaXRsZSIsInByb2plY3RzQmxvY2siLCJwcm9qZWN0cyIsImNyZWF0ZVByb2plY3RzQmxvY2siLCJwcm9qZWN0c1RpdGxlIiwiY3JlYXRlUHJvamVjdHNUaXRsZSIsImRpdiIsImJ0biIsImNyZWF0ZU5ld1Byb2plY3RCdG4iLCJhdXRob3IiLCJmb290ZXIiLCJwYXJhIl0sInNvdXJjZVJvb3QiOiIifQ==